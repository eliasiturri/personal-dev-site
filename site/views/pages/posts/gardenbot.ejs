<!DOCTYPE html>
<html lang="<%= language %>" class="js">
<head>
    <%- include('../../partials/head-outside-main-page'); %>
</head>
<body class="container">
    <div class="main-wrapper">
        <div class="noise-wrapper">
            <div class="noise"></div>

        </div>

        <div class="content-wrapper">
            <div class="header-wrapper">
                <header class="mw-o">
                    <%- include('../../partials/header-outside-main-page'); %>
                </header>
            </div>            
            <main class="mw-o">
                
                <div class="content content--highlight content--intro work-sans-eb-800">
                    <h1 class="text-xl"><%= t("fullposts.gardenbot.title") %></h1>
                    <p class="text-xl text-align-center"><%= t("fullposts.gardenbot.intro") %></p> 
                    <div class="blog-post-date">
                        <span><%= t("fullposts.gardenbot.author") %></span>
                        <span><%= t("fullposts.gardenbot.dateNexus") %></span>
                        <span><%= t("fullposts.gardenbot.date") %></span>
                    </div>
                    <div class="blog-post-toc-title"><%= t("posts.tocName") %></div>
                    <ul class="blog-post-toc">
                        <% t("fullposts.gardenbot.toc", { returnObjects: true }).forEach((el, index) => { %>   
                            <li class="toc-item toc-item-<%= index % 2 === 0 ? 'even' : 'odd' %>">
                                <a href="<%= el.link %>" class="toc-link">
                                    <%= el.name %>
                                </a>
                            </li>
                        <% }); %>
                    </ul>

                </div>      

                <div class="content">
                    <% 
                    const introSection = t("fullposts.gardenbot.sections.introduction", { returnObjects: true });
                    const introAsMarkdown = introSection.asMarkdown || false;
                    %>
                    <% if (introAsMarkdown) { %>
                        <div class="markdown-content">
                            <%- marked.parse(introSection.title) %>
                            <%- marked.parse(introSection.content) %>
                        </div>
                    <% } else { %>
                        <h2 id="introduction"><%= introSection.title %></h2>
                        <p><%= introSection.content %></p>
                    <% } %>
                    <% if (t("fullposts.gardenbot.sections.introduction.images", { returnObjects: true, defaultValue: [] }).length > 0) { %>
                        <div class="image-row">
                            <% t("fullposts.gardenbot.sections.introduction.images", { returnObjects: true }).forEach(img => { %>
                                <div class="image-row-item">
                                    <a href="<%= img.src %>" target="_blank" rel="noopener noreferrer">
                                        <img src="<%= img.src %>" alt="<%= img.caption %>">
                                    </a>
                                    <% if (introAsMarkdown && img.caption) { %>
                                        <div class="image-row-caption markdown-content"><%- marked.parseInline(img.caption) %></div>
                                    <% } else { %>
                                        <div class="image-row-caption"><%= img.caption %></div>
                                    <% } %>
                                </div>
                            <% }); %>
                        </div>
                    <% } %>
                    
                    <% 
                    const hardwareSection = t("fullposts.gardenbot.sections.hardware", { returnObjects: true });
                    const hardwareAsMarkdown = hardwareSection.asMarkdown || false;
                    %>
                    <% if (hardwareAsMarkdown) { %>
                        <div class="markdown-content">
                            <%- marked.parse(hardwareSection.title) %>
                            <%- marked.parse(hardwareSection.content) %>
                        </div>
                    <% } else { %>
                        <h2 id="hardware"><%= hardwareSection.title %></h2>
                        <p><%= hardwareSection.content %></p>
                    <% } %>
                    <% if (t("fullposts.gardenbot.sections.hardware.images", { returnObjects: true, defaultValue: [] }).length > 0) { %>
                        <div class="image-row">
                            <% t("fullposts.gardenbot.sections.hardware.images", { returnObjects: true }).forEach(img => { %>
                                <div class="image-row-item">
                                    <a href="<%= img.src %>" target="_blank" rel="noopener noreferrer">
                                        <img src="<%= img.src %>" alt="<%= img.caption %>">
                                    </a>
                                    <% if (hardwareAsMarkdown && img.caption) { %>
                                        <div class="image-row-caption markdown-content"><%- marked.parseInline(img.caption) %></div>
                                    <% } else { %>
                                        <div class="image-row-caption"><%= img.caption %></div>
                                    <% } %>
                                </div>
                            <% }); %>
                        </div>
                    <% } %>
                    
                    <% 
                    const softwareSection = t("fullposts.gardenbot.sections.software", { returnObjects: true });
                    const softwareAsMarkdown = softwareSection.asMarkdown || false;
                    %>
                    <% if (softwareAsMarkdown) { %>
                        <div class="markdown-content">
                            <%- marked.parse(softwareSection.title) %>
                            <%- marked.parse(softwareSection.content) %>
                        </div>
                    <% } else { %>
                        <h2 id="software"><%= softwareSection.title %></h2>
                        <p><%= softwareSection.content %></p>
                    <% } %>
                    <% if (t("fullposts.gardenbot.sections.software.images", { returnObjects: true, defaultValue: [] }).length > 0) { %>
                        <div class="image-row">
                            <% t("fullposts.gardenbot.sections.software.images", { returnObjects: true }).forEach(img => { %>
                                <div class="image-row-item">
                                    <a href="<%= img.src %>" target="_blank" rel="noopener noreferrer">
                                        <img src="<%= img.src %>" alt="<%= img.caption %>">
                                    </a>
                                    <% if (softwareAsMarkdown && img.caption) { %>
                                        <div class="image-row-caption markdown-content"><%- marked.parseInline(img.caption) %></div>
                                    <% } else { %>
                                        <div class="image-row-caption"><%= img.caption %></div>
                                    <% } %>
                                </div>
                            <% }); %>
                        </div>
                    <% } %>
                    
                    <% 
                    const futureSection = t("fullposts.gardenbot.sections.future", { returnObjects: true });
                    const futureAsMarkdown = futureSection.asMarkdown || false;
                    %>
                    <% if (futureAsMarkdown) { %>
                        <div class="markdown-content">
                            <%- marked.parse(futureSection.title) %>
                            <%- marked.parse(futureSection.content) %>
                        </div>
                    <% } else { %>
                        <h2 id="future"><%= futureSection.title %></h2>
                        <p><%= futureSection.content %></p>
                    <% } %>
                    <% if (t("fullposts.gardenbot.sections.future.images", { returnObjects: true, defaultValue: [] }).length > 0) { %>
                        <div class="image-row">
                            <% t("fullposts.gardenbot.sections.future.images", { returnObjects: true }).forEach(img => { %>
                                <div class="image-row-item">
                                    <a href="<%= img.src %>" target="_blank" rel="noopener noreferrer">
                                        <img src="<%= img.src %>" alt="<%= img.caption %>">
                                    </a>
                                    <% if (futureAsMarkdown && img.caption) { %>
                                        <div class="image-row-caption markdown-content"><%- marked.parseInline(img.caption) %></div>
                                    <% } else { %>
                                        <div class="image-row-caption"><%= img.caption %></div>
                                    <% } %>
                                </div>
                            <% }); %>
                        </div>
                    <% } %>
                </div>

            </main>
            
            <footer class="mw-o">
                <%- include('../../partials/footer'); %>
            </footer>
        </div>

    </div>

    <script src="/assets/js/blog-toc.js"></script>
</body>
</html>
